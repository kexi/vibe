---
title: vibe trust / untrust
description: 設定ファイルの信頼管理
sidebar:
  order: 4
---

`trust`と`untrust`コマンドは設定ファイルの信頼状態を管理します。

## 使い方

```bash
# 設定ファイルを信頼登録
vibe trust

# 設定ファイルの信頼を解除
vibe untrust
```

## なぜ信頼登録が必要なのか？

vibeはSHA-256ハッシュ検証を使用して、設定ファイルが改ざんされていないことを確認します。これにより、フックを通じて悪意のあるスクリプトが実行されるのを防ぎます。

### 信頼フロー

1. **初回**: `vibe trust`を実行して`.vibe.toml`と`.vibe.local.toml`のハッシュを登録
2. **以降の実行**: vibeはフックを実行する前にハッシュを検証
3. **ファイル変更時**: ファイルが変更された場合、再度`vibe trust`を実行する必要があります

## vibe trust

現在の設定ファイルのSHA-256ハッシュを保存して信頼登録します。

```bash
$ vibe trust
.vibe.toml を信頼登録しました (hash: abc123...)
.vibe.local.toml を信頼登録しました (hash: def456...)
```

### 信頼登録される対象

- `.vibe.toml`（存在する場合）
- `.vibe.local.toml`（存在する場合）

## vibe untrust

現在のリポジトリの設定ファイルの信頼を解除します。

```bash
$ vibe untrust
.vibe.toml の信頼を解除しました
.vibe.local.toml の信頼を解除しました
```

## ハッシュ検証

### ハッシュが一致しない場合

信頼登録後に設定ファイルが変更された場合：

```bash
$ vibe start feat/new-feature
エラー: .vibe.toml のハッシュが一致しません。
ファイルは最後の信頼登録以降に変更されています。
'vibe trust' を実行してファイルを再度信頼登録してください。
```

### 複数ハッシュ

vibeはファイルごとに複数のハッシュ（最大100個）を保存するため、各ブランチのバージョンを一度信頼すれば、ブランチを切り替えても再度信頼登録する必要はありません。

## 関連

- [セキュリティ](/ja/security/) - ハッシュ検証の詳細
- [設定](/ja/configuration/) - 設定ファイルの形式
